<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/dash_home.css"> <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-regular-rounded/css/uicons-regular-rounded.css">
    <title>Home Dashboard</title>
</head>

<body>
    <header>
        <nav id="nav_bar">
            <div id="nav_logo">
                <img src="assets/imgs/logoEvora.svg" alt="">
                <h2>Évora</h2>
            </div>
        </nav>
    </header>

    <main>
        <section class="menu">
            <ul class="categories">
                <li class="active"><a href="dashboard_home.html"><i class="fi fi-rr-home"></i>Dashboard</li></a>
                <li><a href="dash_cursos.html"><i class="fi fi-rr-users-alt"></i>Cursos</li></a>
                <li><a href="dash_alerta.html"><i class="fi fi-rr-bell"></i>Alertas</li></a>

                <li class="categories_two"><a href="configuracoes.html"><i class="fi fi-rr-settings"></i>Configurações
                </li></a>
            </ul>
        </section>

        <section class="content">
            <section class="container_one_page">
                <div>
                    <h2>Situação Geral</h2>
                </div>

                <div class="kpis">
                    <div class="low_avg">
                        <div>
                            <img src="assets/imgs/Ellipse 33.svg" alt="">
                            <i class="fi fi-rr-chart-mixed icon"></i>
                        </div>
                        <div class="div_kpi">
                            <p>Alunos abaixo da média</p>
                            <p class="title_number">30%</p>
                        </div>
                    </div>

                    <div class="low_freq">
                        <div>
                            <img src="assets/imgs/Ellipse 33.svg" alt="">
                            <i class="fi fi-rr-triangle-warning icon"></i>
                        </div>
                        <div class="div_kpi">
                            <p class="title_p">Alunos com frequência abaixo de 75%</p>
                            <p class="title_number">500</p>
                        </div>
                    </div>
                    <div class="qtd_alunos">
                        <div>
                            <img src="assets/imgs/Ellipse 33.svg" alt="">
                            <i class="fi fi-rr-users-alt icon"></i>
                        </div>
                        <div class="div_kpi">
                            <p class="title_p">Quantidade de alunos matriculados na instituição</p>
                            <p class="title_number">1200</p>
                        </div>
                    </div>
                </div>

                <section class="charts-container">
                    
                    <div class="chart-card">
                        <h3>Top 5 Cursos com Maior Risco</h3>
                        <canvas id="percentageChart"></canvas> </div>
                    
                    <div class="chart-card">
                        <h3>Quantidade de Evasão</h3>
                        <canvas id="dropoutChart"></canvas> </div>

                </section>
                </section>
        </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
        // ----- GRÁFICO 1 (BARRAS - TOP 5 CURSOS) -----
        const ctx1 = document.getElementById('percentageChart');
        if (ctx1) { 
            new Chart(ctx1, {
                type: 'bar', 
                data: {
                    labels: ['Pedagogia', 'Biologia', 'Quimica', 'Direito', 'T.I'],
                    datasets: [{
                        label: 'Índice de Risco',
                        data: [78, 60, 50, 40, 30], 
                        backgroundColor: [ 
                            '#E57373', 
                            '#F7B84B', 
                            '#FFD54F', 
                            '#81C784', 
                            '#64B5F6'  
                        ],
                        borderWidth: 0 
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false 
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100, 
                            ticks: {
                                stepSize: 25,
                                callback: function (value) {
                                    return value + '%'; 
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false 
                            }
                        }
                    }
                }
            });
        }


        // ----- GRÁFICO 2 (EVASÃO - LINHA VERDE/AZUL) -----
        const ctx2 = document.getElementById('dropoutChart');
        if (ctx2) { 
            new Chart(ctx2, {
                type: 'line', 
                data: {
                    labels: ['Jan', 'Fev', 'Mar', 'April', 'May', 'Jun'],
                    datasets: [{
                        label: 'Evasão (Qtd de alunos)',
                        data: [20, 40, 10, 80, 70, 40, 110], 
                        borderWidth: 3,
                        borderColor: '#44A1A0',       
                        pointBackgroundColor: '#44A1A0', 
                        tension: 0.4,                  
                        fill: false,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false 
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 150, 
                            ticks: {
                                stepSize: 50
                            }
                        },
                        x: {
                            grid: {
                                display: false 
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>